# frozen_string_literal: true

require 'date'
require 'fileutils'
require 'json'
require 'time'
require 'yaml'
require 'zip'

Gem.loaded_specs['wpxf'].dependencies.each do |d|
  require d.name unless d.type == :development || d.name == 'rubyzip'
end

# The root namespace.
module Wpxf
  def self.data_directory
    File.join(app_path, 'data')
  end

  def self.app_path
    File.expand_path(File.dirname(__dir__))
  end

  def self.version
    Gem.loaded_specs['wpxf'].version
  end

  def self.home_directory
    File.join(Dir.home, '.wpxf')
  end

  def self.databases_path
    path = File.join(home_directory, 'db')
    FileUtils.mkdir_p(path) unless File.directory?(path)
    path
  end

  def self.change_stdout_sync(enabled)
    original_setting = STDOUT.sync
    STDOUT.sync = true
    yield(enabled)
    STDOUT.sync = original_setting
  end
end

require_relative '../db/env'
